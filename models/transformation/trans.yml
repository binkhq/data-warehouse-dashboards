version: 2

# Unlike staging, transformations are performed on already staged data and do not come
# directly from a source.
# All transformations are defined in a single trans.yml file.

# This example works out current sales statistics for each customer to suplement the
# customer data. Though this may be connected to the customer table as just another
# joining table, in this case it's not used.

models:

  - name: trans__mock_brands
    config:
      tags:
        - daily  
        
  - name: trans__lc_joins
    columns:
      - name: DATE
        description: All dates with LC changes

      - name: BRAND
        description: HSBC / LLOYDS etc

      - name: LOYALTY_PLAN_NAME
        description: Wasabi club etc

      - name: REQUESTED_JOINS
        description: Number of LC join request events

      - name: FAILED_JOINS
        description: Number of LC join failed events

      - name: SUCCESSFUL_JOINS
        description: Number of LC join success events

  - name: trans__lc_links
    columns:
      - name: DATE
        description: All dates with LC changes

      - name: BRAND
        description: HSBC / LLOYDS etc

      - name: LOYALTY_PLAN_NAME
        description: Wasabi club etc

      - name: REQUESTED_JOINS
        description: Number of LC join request events

      - name: FAILED_JOINS
        description: Number of LC join failed events

      - name: SUCCESSFUL_JOINS
        description: Number of LC join success events